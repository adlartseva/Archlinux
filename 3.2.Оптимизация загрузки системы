##################################
## Оптимизация загрузки системы ##
##################################  

$ systemd-analyze  # показывает за какое время была загружена система

$ mkinitcpio -M  # покажет модули, которые загружаются в месте с системой

$ mkinitcpio -M > modules.txt  # команда запишет в файл все модули, которые загружаются весте с системой

$ lspci -v | grep ahci  # смотрим используется ли модуль системой

     ath3k

$ udevadm info --attribute-walk -n /dev/sda1 | grep 'DRIVERS=="[^"]'  # узнаем атрибуты устройства

###########################################################################################################
## Во время загрузки (grub) выберим с какого ядра грузится и хдесь же изменим параметры в строке "linux" ##

    linux    /boot/vmlinuz-linux root=UUID=........ rw quiet break=postmount
###########################################################################################################

# lsmod  # посмотрим состояние модулей

# cp /etc/mkinitcpio.comf /etc/mkinitcpio.conf.back  # сделаем резервную копию конфига

# nano mkinitcpio.conf  # отредактируем конфиг

  MODULES="ahci sd_mod ext4"   # добавим модулей

  BINARIES="fsck fsck.ext4"  # добавим модулей

  HOOKS="base keymap"  # удалим все модули, кроме этих

# mkinitcpio -g /boot/initramfs-linux-tiny.img  # сгенирируем ядро

$ reboot  # перезагрузка

############################################################################################################
## Во время загрузки (grub) выберим с какого ядра грузится и здесь же изменим параметры в строке "initrd" ##

   initrd   /boot/initramfs-linux-tiny.img
############################################################################################################

$ systemd-analyze  # показывает за какое время была загружена система

$ sudo mkinitcpio -p linux  # обновим загрузочный RAM диск

$ reboot  # перезагрузка

$ systemd-analyze  # показывает за какое время была загружена система
