######################
## Grub - загрузчик ##
######################

$ sudo grub-instal /dev/sda  # установка grub

$ sudo mkconfig /boot/grub/grub.cfg  # конфигурируем grub

$ sudo nano /etc/grub.d/40_custom  # в этом файле можно изменять пункты меню grub
 
 Memtest86+

   menuentry "Memtest86+" {
    linux16 /boot/memtest86+/memtest.bin
}

  Меню выключения: 

    menuentry "System shutdown" {
	echo "System shutting down..."
	halt
}

  Меню перезагрузки:

    menuentry "System restart" {
	echo "System rebooting..."
	reboot
}


$ sudo nano /etc/grub.d/...  # в этой дирктории находятся файлы grub

$ cd /boot/grub/  # в этой директории находятся: темы, шрифты

######################
## Grub - настройка ##
######################

$ sudo nano /etc/default/grub  # только здесь желательно редактировать конфиг grub

 GRUB_DEFAULT  # номер или заголок пункта меню, выбранного по-умолчанию

 GRUB_TIMEOUT  # время, после которого будет автоматически загружаться пункт по-умолчанию

 GRUB_CMDLINE_LINUX  # параметры ядра Linux, добавляемые во все пункты меню.
 
 GRUB_CMDLINE_LINUX_DEFAULT  # параметры ядра Linux, добавляемые только в пункты меню, сгенерированные без "recovery". В ArchLinux настройки автоконфигуратора по-умолчанию содержат GRUB_DISABLE_RECOVERY=true, поэтому фактически в каждый пункт меню добавляются параметры из обех упомянутых строк.

 GRUB_BACKGROUND  # фоновый рисунок. Обычно, берется из темы (/boot/grub/themes/starfield/starfield.png)

 GRUB_THEME  # тема ("/boot/grub/themes/starfield/theme.txt")

 GRUB_COLOR_NORMAL  # общие цвета текста/фона

 GRUB_COLOR_HIGHLIGHT  # цвета текста/фона выделенной строки (сптсок доступных цветов: http://www.gnu.org/software/grub/manual/html_node/color_005fnormal.html#color_005fnormal)

 GRUB_GFXMODE  # режим экрана загрузки (разрешение экрана)

 GRUB_GFXPAYLOAD_LINUX  # тоже только для ядра

## Скрытие меню ##
# grub-mkconfig умеет "скрывать" меню так, что оно появляется на экране только при нажатии клавиши ESC до истечения таймаута. Чтобы использовать эту его возможность, нужно раскомментировать строки:

 GRUB_HIDDEN_TIMEOUT=5  # время в сек. (общие)
 
 GRUB_HIDDEN_TIMEOUT_QUIET=true  # активация

## Запоминание выбранного пункта меню ##

  GRUB_DEFAULT="saved"  # сохраняем запоминание выбранного пункта в меню 
  
  GRUB_SAVEDEFAULT="true"  # активация

################
## Блокировка ##
################

# chattr +i /boot/grub/grub.cfg  # блокировка файла. Защита от любых изменений 

# nano /etc/pacman.conf  # чтобы избежать конфликта при обновлении пакета, поставим его в игнор, добавив запись:

  NoUpgrade = boot/grub/grub.cfg

# chattr -i /boot/grub/grub.cfg  # точно таким же способом снимаем блокировку

########################################
## Настройка параметров режима экрана ##
########################################

# nano /etc/default/grub  # заходим в консоль загрузчика grub

    GRUB_GFXMODE=console  # вместо auto выберим текстовый режим

# в меню загрузки grub нажмем "esc", что перейти в консоль    

grub> videoinfo  # с помощью этой команды узнаем актуальный режим экрана (разширение экрана + еще параметр)

grub> videotest 1280x1024x32  # тут же проверим его, вписав свой режим

   1280  # горизонталь

   1024  # вертикаль

   32  # Hz

# nano /etc/default/grub  # пропишем наш режим в конфиге

   GRUB_GFXMODE=1280x1024x32   # подставить свой режим

   GRUB_GFXPAYLOAD_LINUX=keep  # чтобы использовать такой же режи для ядра (keep - соблюдать)

$ sudo hwinfo --monitor  # так же режим экрана можно узнать и не заходя в консоль grub, прямо из загруженной ОС (пункт: "Resolution")   

############
## Шрифты ##
############

# шрифты  # должны быть в формате .pf2

# grub-mkfont шрифт.ttf -s размер -o шрифт.pf2  # таким образом можно конвертировать нужный шрифт в формат, который подъодит grub В данном сучаем из ttf делаем pf2

# grub-mkfont шрифт.bdf -o шрифт.pf2  # тоже самое, только из bdf делаем pf2

# thunar /boot/grub/fonts/  # после конвертации добавляем шрифт в папку и прописать его в "grub.cfg"

  font="/usr/share/grub/название.pf2"  # пишем имя шрифта. В общем ищем по слову "font" и прописываем там, где нужно.

  set lang=ru_RU  # включаем русский язык (если шрифт позволяет)

  ИЛИ

  # /etc/default/grub  # или быстре будет прописать шрифт в конфиге:

     #GRUB_THEME="/path/to/gfxtheme"  # закоментируем тему
     GRUB_FONT="/path/to/font.pf2"  # вписываем шрифт

# thunar /boot/grub/themes/starfield/  # или можно добавить в саму тему и прописать шрифт в "theme.txt"

   message-font: "DejaVu Sans Regular 12"  # пишем имя шрифта и размер. В общем ищем по слову "font" и прописываем там, где нужно.

grub> loadfont /boot/grub/themes/тема/шрифт.pf2  # в консоле grub можно проверить шрифты на совместимость.

#############
## Справка ##
#############

Использование: grub-mkfont [ПАРАМЕТР…] [ПАРАМЕТРЫ]

  -a, --force-autohint     # принудительный автохинтинг
  
  -b, --bold               # преобразовать в жирный шрифт
  
  -c, --asce=НОМЕР         # назначить подъём шрифта
  
  -d, --desc=НОМЕР         # назначить спуск шрифта
  
  -i, --index=НОМЕР        # выбрать индекс начертания
  
  -n, --name=ИМЯ           # назначить гарнитуру шрифта
      
      --no-bitmap          # игнорировать заданный в битовой карте размер при
                             загрузке
      --no-hinting         # отключить хинтинг
  
  -o, --output=ФАЙЛ        # сохранить вывод в ФАЙЛ [требуется]
  
  -r, --range=ИЗ-В[,ИЗ-В]  # назначить диапазон шрифта
  
  -s, --size=РАЗМЕР        # назначить размер шрифта
  
  -v, --verbose            # показывать подробные сообщения.
  
  -?, --help               # показать эту справку
      
      --usage              # показать короткую справку по использованию
  
  -V, --version            # показать номер версии программы


